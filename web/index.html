<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>控制台 | Zitat一谚</title>
    <link rel="stylesheet" href="./styles/loginform.css">
    <link rel="stylesheet" href="./styles/toast.css">
</head>
<body>

    <div class="background">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
    </div>
    <div class="login-container">
        <img src="./assets/logo.png" alt="logo" class="logo">
        <h2 class="login-title">欢迎使用一谚</h2>
        
        <div class="tabs">
            <button id="login-tab" class="tab-btn active">登录</button>
            <button id="register-tab" class="tab-btn">注册</button>
        </div>

        <div class="form-wrapper">
        <!-- 登录表单 -->
        <div id="login-form" class="form-container active">
            <div class="form-group">
                <label for="login-email">邮箱</label>
                <input type="email" id="login-email" required>
            </div>
            <div class="form-group">
                    <label for="login-password">密码</label>
                    <input type="password" id="login-password" required>
                </div>

                <div class="remember-forgot">
                    <label><input type="checkbox" id="rememberMe"> 记住我</label>
                </div>
                <button id="login-btn" class="btn-login">登录</button>
        </div>

        <!-- 注册表单 -->
        <div id="register-form" class="form-container">
            <div class="form-group">
                <label for="register-email">邮箱</label>
                <input type="email" id="register-email" required>
            </div>
            <div class="form-group">
                <label for="register-password">密码</label>
                <input type="password" id="register-password" required>
            </div>
            <div class="form-group">
                <label for="register-confirm-password">确认密码</label>
                <input type="password" id="register-confirm-password" required>
            </div>
            <div class="verification-container">
                <label for="verification-code">验证码</label>
                <div class="verification-input-group">
                    <input type="text" id="verification-code" required placeholder="输入6位验证码">
                    <button id="send-code-btn" class="btn-login verification-btn">发送验证码</button>
                </div>
                <div id="countdown" style="text-align: center; margin-top: 5px; color: #666; display: none;">验证码将在 <span id="countdown-number">60</span> 秒后过期</div>
            </div>
            <button id="register-btn" class="btn-login">注册</button>
        </div>
        </div>
    </div>

    <style>
        /* 保留必要的动画样式 */
        .form-container {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
            position: absolute;
            width: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        .form-container.active {
            opacity: 1;
            transform: translateY(0);
            position: relative;
            pointer-events: auto;
        }
    </style>
    <script>
        // 切换登录/注册标签
        function switchToLogin() {
            const registerForm = document.getElementById('register-form');
            registerForm.classList.remove('active');
            
            // 等待淡出动画完成后再显示登录表单
            setTimeout(() => {
                document.getElementById('login-form').classList.add('active');
                document.getElementById('login-tab').classList.add('active');
                document.getElementById('register-tab').classList.remove('active');
            }, 500);
        }
        
        function switchToRegister() {
            const loginForm = document.getElementById('login-form');
            loginForm.classList.remove('active');
            
            // 等待淡出动画完成后再显示注册表单
            setTimeout(() => {
                document.getElementById('register-form').classList.add('active');
                document.getElementById('register-tab').classList.add('active');
                document.getElementById('login-tab').classList.remove('active');
            }, 500);
        }
        
        document.getElementById('login-tab').addEventListener('click', switchToLogin);
        document.getElementById('register-tab').addEventListener('click', switchToRegister);

        // 验证码功能
        let countdownInterval;
        let countdownTime = 60;

        // 发送验证码
        document.getElementById('send-code-btn').addEventListener('click', function() {
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;

            if (!email || !password || !confirmPassword) {
                showToast('请填写完整信息！', 'error');
                return;
            }

            if (password !== confirmPassword) {
                showToast('两次密码不一致！', 'error');
                return;
            }

            // 模拟发送验证码
            showToast('验证码已发送到 ' + email, 'success');

            // 显示倒计时
            document.getElementById('countdown').style.display = 'block';
            document.getElementById('send-code-btn').disabled = true;
            document.getElementById('send-code-btn').style.opacity = '0.5';

            // 开始倒计时
            countdownTime = 60;
            document.getElementById('countdown-number').textContent = countdownTime;

            if (countdownInterval) {
                clearInterval(countdownInterval);
            }

            countdownInterval = setInterval(function() {
                countdownTime--;
                document.getElementById('countdown-number').textContent = countdownTime;

                if (countdownTime <= 0) {
                    clearInterval(countdownInterval);
                    document.getElementById('countdown').style.display = 'none';
                    document.getElementById('send-code-btn').disabled = false;
                    document.getElementById('send-code-btn').style.opacity = '1';
                }
            }, 1000);
        });

        // 注册按钮点击事件
        document.getElementById('register-btn').addEventListener('click', function() {
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            const code = document.getElementById('verification-code').value;

            if (!email || !password || !confirmPassword || !code) {
                showToast('请填写完整信息', 'error');
                return;
            }

            if (password !== confirmPassword) {
                showToast('两次密码不一致', 'error');
                return;
            }

            if (code.length !== 6) {
                showToast('验证码长度为6位', 'error');
                return;
            }

            // 模拟注册
            showToast('注册成功！', 'success');
            // 这里可以添加实际的注册逻辑
            switchToLogin();
        });
    </script>

    <script src="/eel.js"></script>
    <script src="./scripts/toast.js"></script>
    <script src="./scripts/login.js"></script>
</body>
</html>